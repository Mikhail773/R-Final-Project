#!/bin/bash
# The program will restore the named file/directory from
# ~/.trash to the current working directory.
# Invoke as
#
# Usage: ./undelete filename
#
# Check for argument
if [[ $# -ne 1 ]] 
   then
      echo "Usage: $0 filename"
      exit 1
fi
# Check if ~/.trash exists; create one if necessary
if [[ !(-d ~/.trash) ]] 
   then
	echo "$0: ~./trash does not exist"
            exit 2
fi
# Check if ~/.trash contains an entry with the given name
if [[ !(-e ~/.trash/$1) ]] 
     then
	echo "$0: $1 is not in ~./trash"
            exit 3
fi
# Check if the named entry exists in the cwd
if [[ -e $1 ]] 
    then
      if [ -w $1 ]
	then
	rm $1
      else
	echo "$0: $1 cannot be overwritten"
	   exit 4
      fi
fi

# Move the entry from the cwd to ~/.trash
mv ~/.trash/$1 $1
exit 0
